# 미대톡 MVP 개발 태스크 명세서

## 📋 프로젝트 개요
- **프로젝트명**: 미대톡 (MidaeTalk)
- **목표**: 입시미술 피드백 커뮤니티 플랫폼 MVP 개발
- **핵심 가설**: 학생들이 텍스트 기반 피드백만으로도 작품 공유 및 멘토 조언을 받으려는 니즈가 있는가?

## 🎯 개발 단계별 태스크 분리

### Phase 1: 프로젝트 초기 설정 및 인프라 구축
**목표**: 개발 환경 구축 및 기본 인프라 설정

#### 1.1 프로젝트 초기 설정
- [ ] **TASK-001**: Next.js 프로젝트 기본 설정 확인 및 업데이트
  - 현재 프로젝트 구조 검토
  - 필요한 의존성 패키지 설치 (Supabase, UI 라이브러리 등)
  - TypeScript 설정 최적화
  - **예상 소요시간**: 2-3시간
  - **의존성**: 없음

- [ ] **TASK-002**: Supabase 프로젝트 생성 및 설정
  - Supabase 계정 생성 및 새 프로젝트 생성
  - 프로젝트 URL 및 API 키 환경변수 설정
  - Supabase 클라이언트 초기화
  - **예상 소요시간**: 1-2시간
  - **의존성**: 없음

- [ ] **TASK-003**: 데이터베이스 스키마 설계 및 구현
  - `users` 테이블 생성 (auth.users와 연동)
  - `posts` 테이블 생성 (작품 게시물)
  - `feedbacks` 테이블 생성 (피드백 댓글)
  - `mentor_verifications` 테이블 생성 (멘토 인증)
  - **예상 소요시간**: 3-4시간
  - **의존성**: TASK-002

- [ ] **TASK-004**: Supabase Storage 버킷 설정
  - `artworks` 버킷 생성 (공개 접근)
  - `verifications` 버킷 생성 (비공개 접근)
  - RLS 정책 설정
  - **예상 소요시간**: 2-3시간
  - **의존성**: TASK-003

- [ ] **TASK-005**: UI 라이브러리 및 디자인 시스템 구축
  - Tailwind CSS 설정 확인/업데이트
  - 기본 컴포넌트 라이브러리 설정 (shadcn/ui 또는 유사)
  - 공통 레이아웃 컴포넌트 생성
  - **예상 소요시간**: 4-5시간
  - **의존성**: TASK-001

### Phase 2: 인증 시스템 구현
**목표**: 사용자 회원가입, 로그인, 역할 기반 접근 제어

#### 2.1 기본 인증 기능
- [ ] **TASK-006**: 회원가입 페이지 구현
  - 이메일/비밀번호 입력 폼
  - 역할 선택 (학생/멘토)
  - 이름 입력 필드
  - 유효성 검사 및 에러 처리
  - **예상 소요시간**: 4-5시간
  - **의존성**: TASK-003, TASK-005

- [ ] **TASK-007**: 로그인 페이지 구현
  - 이메일/비밀번호 로그인 폼
  - 로그인 상태 유지
  - 에러 메시지 표시
  - **예상 소요시간**: 3-4시간
  - **의존성**: TASK-006

- [ ] **TASK-008**: 인증 상태 관리 및 미들웨어
  - Supabase Auth 상태 관리
  - 보호된 라우트 미들웨어 구현
  - 로그아웃 기능
  - **예상 소요시간**: 3-4시간
  - **의존성**: TASK-007

- [ ] **TASK-009**: 사용자 프로필 데이터 동기화
  - auth.users와 public.users 테이블 동기화 트리거
  - 회원가입 시 프로필 데이터 자동 생성
  - **예상 소요시간**: 2-3시간
  - **의존성**: TASK-003, TASK-006

### Phase 3: 핵심 기능 구현
**목표**: 작품 업로드, 갤러리, 피드백 시스템

#### 3.1 작품 관리 시스템
- [ ] **TASK-010**: 작품 업로드 페이지 구현
  - 이미지 파일 선택 및 미리보기
  - 제목, 설명 입력 폼
  - 파일 업로드 진행률 표시
  - 업로드 완료 후 갤러리로 리다이렉트
  - **예상 소요시간**: 5-6시간
  - **의존성**: TASK-004, TASK-008

- [ ] **TASK-011**: 작품 갤러리 페이지 구현
  - 그리드 레이아웃으로 작품 목록 표시
  - 최신순 정렬
  - 무한 스크롤 또는 페이지네이션
  - 작품 클릭 시 상세 페이지로 이동
  - **예상 소요시간**: 4-5시간
  - **의존성**: TASK-010

- [ ] **TASK-012**: 작품 상세 페이지 구현
  - 작품 이미지, 제목, 설명 표시
  - 작성자 정보 표시
  - 피드백 목록 표시
  - 피드백 작성 폼
  - **예상 소요시간**: 4-5시간
  - **의존성**: TASK-011

- [ ] **TASK-013**: 피드백 시스템 구현
  - 피드백 작성 및 저장
  - 피드백 목록 조회 및 표시
  - 작성자 정보 (이름, 역할, 인증 상태) 표시
  - 실시간 업데이트 (선택사항)
  - **예상 소요시간**: 3-4시간
  - **의존성**: TASK-012

#### 3.2 사용자 프로필 및 포트폴리오
- [ ] **TASK-014**: 사용자 프로필 페이지 구현
  - 기본 정보 표시 (이름, 역할)
  - 인증 멘토 배지 표시 로직
  - 멘토 인증 서류 업로드 기능 (멘토만)
  - **예상 소요시간**: 4-5시간
  - **의존성**: TASK-008, TASK-004

- [ ] **TASK-015**: 개인 포트폴리오 페이지 구현
  - 사용자 본인의 작품만 표시
  - 갤러리 형태로 레이아웃 구성
  - 작품 개수 통계 표시
  - **예상 소요시간**: 3-4시간
  - **의존성**: TASK-014

### Phase 4: 멘토 인증 시스템
**목표**: 멘토 인증 프로세스 및 관리자 기능

#### 4.1 멘토 인증 기능
- [ ] **TASK-016**: 멘토 인증 서류 업로드 기능
  - 멘토 전용 서류 업로드 UI
  - PDF/이미지 파일 업로드
  - 업로드 상태 표시
  - 중복 업로드 방지 로직
  - **예상 소요시간**: 3-4시간
  - **의존성**: TASK-014

- [ ] **TASK-017**: 인증 상태 표시 시스템
  - 인증 대기/승인/거부 상태 표시
  - 인증 멘토 배지 UI 컴포넌트
  - 프로필에서 인증 상태 확인
  - **예상 소요시간**: 2-3시간
  - **의존성**: TASK-016

#### 4.2 관리자 기능 (Supabase 대시보드 활용)
- [ ] **TASK-018**: 관리자 가이드 문서 작성
  - Supabase 대시보드 접근 방법
  - 멘토 인증 승인 프로세스
  - 데이터베이스 직접 수정 방법
  - **예상 소요시간**: 1-2시간
  - **의존성**: TASK-017

### Phase 5: UI/UX 개선 및 최적화
**목표**: 사용자 경험 향상 및 성능 최적화

#### 5.1 UI/UX 개선
- [ ] **TASK-019**: 반응형 디자인 구현
  - 모바일/태블릿/데스크톱 대응
  - 터치 친화적 인터페이스
  - **예상 소요시간**: 4-5시간
  - **의존성**: 모든 핵심 기능 완료 후

- [ ] **TASK-020**: 로딩 상태 및 에러 처리 개선
  - 스켈레톤 로딩 UI
  - 에러 바운더리 구현
  - 사용자 친화적 에러 메시지
  - **예상 소요시간**: 3-4시간
  - **의존성**: 모든 핵심 기능 완료 후

- [ ] **TASK-021**: 접근성(Accessibility) 개선
  - 키보드 네비게이션 지원
  - 스크린 리더 호환성
  - 색상 대비 개선
  - **예상 소요시간**: 2-3시간
  - **의존성**: TASK-019

#### 5.2 성능 최적화
- [ ] **TASK-022**: 이미지 최적화
  - Next.js Image 컴포넌트 활용
  - 이미지 압축 및 리사이징
  - 지연 로딩(Lazy Loading) 구현
  - **예상 소요시간**: 2-3시간
  - **의존성**: TASK-011

- [ ] **TASK-023**: 데이터 페칭 최적화
  - React Query 또는 SWR 도입 검토
  - 캐싱 전략 구현
  - 불필요한 API 호출 최소화
  - **예상 소요시간**: 3-4시간
  - **의존성**: 모든 데이터 관련 기능 완료 후

### Phase 6: 테스트 및 배포 준비
**목표**: 품질 보증 및 배포 준비

#### 6.1 테스트 구현
- [ ] **TASK-024**: 단위 테스트 작성
  - 핵심 컴포넌트 테스트
  - 유틸리티 함수 테스트
  - **예상 소요시간**: 4-5시간
  - **의존성**: 모든 기능 구현 완료 후

- [ ] **TASK-025**: 통합 테스트 작성
  - API 엔드포인트 테스트
  - 사용자 플로우 테스트
  - **예상 소요시간**: 3-4시간
  - **의존성**: TASK-024

#### 6.2 배포 준비
- [ ] **TASK-026**: 환경 설정 최적화
  - 프로덕션 환경변수 설정
  - 빌드 최적화
  - **예상 소요시간**: 1-2시간
  - **의존성**: 모든 기능 완료 후

- [ ] **TASK-027**: 배포 및 모니터링 설정
  - Vercel 또는 유사 플랫폼 배포
  - 에러 모니터링 도구 설정
  - **예상 소요시간**: 2-3시간
  - **의존성**: TASK-026

## 📊 진행 상황 추적

### 전체 진행률
- **완료된 태스크**: 0/27 (0%)
- **진행 중인 태스크**: 0개
- **예상 총 소요시간**: 80-100시간

### 단계별 진행률
- **Phase 1 (프로젝트 설정)**: 0/5 (0%)
- **Phase 2 (인증 시스템)**: 0/4 (0%)
- **Phase 3 (핵심 기능)**: 0/6 (0%)
- **Phase 4 (멘토 인증)**: 0/3 (0%)
- **Phase 5 (UI/UX 개선)**: 0/5 (0%)
- **Phase 6 (테스트 및 배포)**: 0/4 (0%)

## 🔄 의존성 다이어그램

```
TASK-001 → TASK-005
TASK-002 → TASK-003 → TASK-004
TASK-003 → TASK-006 → TASK-007 → TASK-008 → TASK-009
TASK-004 → TASK-010 → TASK-011 → TASK-012 → TASK-013
TASK-008 → TASK-014 → TASK-015
TASK-014 → TASK-016 → TASK-017 → TASK-018
TASK-011 → TASK-022
TASK-013 → TASK-023
```

## 📝 개발 가이드라인

### 우선순위 규칙
1. **Critical Path**: TASK-001 → TASK-002 → TASK-003 → TASK-004 → TASK-006 → TASK-010 → TASK-011 → TASK-012
2. **병렬 개발 가능**: Phase 1의 일부 태스크들은 동시 진행 가능
3. **MVP 핵심**: Phase 1-3이 MVP의 핵심 기능

### 체크리스트 사용법
- [ ] 미완료
- [x] 완료
- [🔄] 진행 중
- [⏸️] 일시 중단
- [❌] 문제 발생

### 주의사항
- 각 태스크 완료 후 다음 태스크 시작 전에 의존성 확인
- 예상 소요시간은 초보자 기준으로 설정됨
- 실제 개발 시 경험에 따라 시간 단축 가능
- 문제 발생 시 즉시 이슈 등록 및 해결 방안 모색

## 🎯 MVP 완료 기준
다음 기능들이 모두 구현되고 테스트 완료 시 MVP 완료로 간주:
- [ ] 사용자 회원가입/로그인 (학생/멘토 구분)
- [ ] 작품 업로드 및 갤러리 표시
- [ ] 텍스트 피드백 작성 및 조회
- [ ] 개인 포트폴리오 조회
- [ ] 멘토 인증 시스템 (서류 업로드 및 관리자 승인)
- [ ] 기본적인 반응형 디자인

## 🐛 버그 수정 및 트러블슈팅 기록

### 2025-09-26: 이미지 업로드 실패 문제 해결
- **문제 현상**: 작품 업로드 페이지에서 이미지 파일 업로드 시 "이미지 업로드에 실패했습니다" 메시지 발생 및 업로드 불가.
- **진단 및 해결 과정**:
  1.  **1차 원인**: Supabase Storage `artworks` 버킷의 RLS(Row Level Security) 정책 미설정으로 인한 권한 부족.
      - **해결**: Supabase 대시보드에서 `SELECT`, `INSERT`, `DELETE` 권한을 부여하는 RLS 정책을 설정하도록 가이드.
  2.  **2차 원인**: 한글 등 비-ASCII 문자가 포함된 파일명으로 업로드 시 `Invalid key` 오류 발생.
      - **해결**: `app/upload/actions.ts`에서 파일명을 `encodeURIComponent`로 인코딩하여 URL-safe한 경로를 생성하도록 수정.
  3.  **3차 원인**: 업로드 성공 후, `next/image` 컴포넌트에서 외부 도메인(`*.supabase.co`)에 대한 설정이 없어 이미지 로드 실패.
      - **해결**: `next.config.ts` 파일에 `images.remotePatterns` 설정을 추가하여 Supabase 스토리지 도메인을 허용.
- **수정된 파일**:
  - `app/upload/actions.ts`
  - `next.config.ts`
